import{_ as a,r as e,w as l,b as s,c as t,a as n,F as o,d as c,e as i,v as r,f as u,n as d,t as v,u as m,o as g,g as p,h as y}from"./index.CIxDUkZG.js";import{_ as h}from"./macaron_yellow_rgb.DN6hcqoj.js";import{g as f}from"./data.BdDFeyDE.js";const k={class:"qing-female-index"},C={class:"particles-container"},b={class:"main-content"},w={class:"search-bar"},q={class:"search-input"},x={class:"category-container"},S={class:"category-scroll"},_=["onClick"],D={class:"category-text"},I={key:0,class:"subcategory-dropdown"},L=["onClick"],M={class:"subcategory-text"},O={class:"waterfall-container"},$={class:"card-content"},J=["src","onError"],U={class:"dish-info"},j={class:"dish-name"},E={class:"dish-description"},N={class:"dish-footer"},T={class:"dish-price"},z={class:"price-text"},A=["onClick"],B={key:0,class:"cart-badge"},F={key:0,class:"cart-empty"},P={key:1,class:"cart-items"},R={class:"item-image"},V=["src","alt"],G={class:"item-info"},H={class:"item-name"},K={class:"item-price"},Q={class:"item-actions"},W=["onClick"],X={class:"quantity"},Y=["onClick"],Z={key:2,class:"cart-footer"},aa={class:"total-info"},ea={class:"total-price"},la=a({__name:"index",setup(a){const la=m(),sa=e([]),ta=e([]),na=e([[],[]]),oa=e(""),ca=e("ä¸»é£Ÿ"),ia=e("all"),ra=e(null),ua=e([]),da=e(!1),va=e([]),ma=e(0),ga=e(!1);l(va,()=>{localStorage.setItem("femaleCart",JSON.stringify(va.value)),console.log("è´­ç‰©è½¦æ•°æ®å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨")},{deep:!0});const pa=e([{name:"ä¸»é£Ÿ"},{name:"ç´ èœ"},{name:"è¤èœ"},{name:"å…¶ä»–"}]),ya=e(new Map);s(()=>{ha(),fa(),(()=>{const a=localStorage.getItem("femaleCart");a&&(va.value=JSON.parse(a),wa(),console.log("ä»æœ¬åœ°å­˜å‚¨åŠ è½½è´­ç‰©è½¦æ•°æ®:",va.value))})()});const ha=()=>{const a=[];for(let e=0;e<30;e++)a.push({left:100*Math.random(),top:100*Math.random(),delay:2e3*Math.random(),duration:4e3+2e3*Math.random()});ua.value=a},fa=async()=>{console.log("å¼€å§‹åŠ è½½èœå“æ•°æ®..."),da.value=!0;try{console.log("è°ƒç”¨loadDishDataå‡½æ•°...");const a=await(async()=>(console.log("å¼€å§‹åŠ è½½èœå“æ•°æ®..."),f()))();console.log("åŠ è½½èœå“æ•°æ®æˆåŠŸï¼Œå…±åŠ è½½åˆ°",a.length,"æ¡æ•°æ®"),sa.value=a,console.log("allDishes.valueèµ‹å€¼å®Œæˆï¼Œé•¿åº¦:",sa.value.length),(()=>{const a=new Map;sa.value.forEach(e=>{let l=e.category,s=e.subCategory;"æµ·é²œ"===l?(l="å…¶ä»–",s="é±¼é²œ"):"æ±¤"===l&&(l="å…¶ä»–",s="æ±¤"),a.has(l)||a.set(l,new Set),a.get(l).add(s)}),ya.value=a})(),console.log("äºŒçº§åˆ†ç±»æ˜ å°„åˆå§‹åŒ–å®Œæˆ"),ba(oa.value,ca.value,ia.value),da.value=!1,console.log("åŠ è½½èœå“æ•°æ®å®Œæˆ")}catch(a){console.error("åŠ è½½èœå“æ•°æ®å¤±è´¥:",a),da.value=!1}},ka=a=>{ia.value=a,ba(oa.value,ca.value,a),ra.value=null},Ca=a=>{ca.value=a,ia.value="all",ba(oa.value,a,"all")};l(oa,a=>{ba(a,"","all")});const ba=(a,e,l)=>{let s=[...sa.value];if(e&&(s="å…¶ä»–"===e?s.filter(a=>"æµ·é²œ"===a.category||"æ±¤"===a.category):s.filter(a=>a.category===e),"all"!==l&&("å…¶ä»–"===e?"é±¼é²œ"===l?s=s.filter(a=>"æµ·é²œ"===a.category):"æ±¤"===l&&(s=s.filter(a=>"æ±¤"===a.category)):s=s.filter(a=>a.subCategory===l))),a&&a.trim()){const e=a.toLowerCase();s=sa.value.filter(a=>a.name&&a.name.toLowerCase().includes(e)||a.description&&a.description.toLowerCase().includes(e)||a.ingredients&&a.ingredients.some(a=>a&&a.toLowerCase().includes(e)))}const t=new Map,n=s.filter(a=>{const e=a.name.toLowerCase().replace(/[ç‚–ç…®ç‚’ç‚¸çƒ§ç„–ç…çƒ¤è’¸çƒ©æ‹Œ]/g," ").split("").sort().join("");return!t.has(e)&&(t.set(e,a),!0)});ta.value=n,console.log("æœç´¢å…³é”®è¯:",a,"åŸæ•°æ®é•¿åº¦:",s.length,"å»é‡åé•¿åº¦:",n.length),(a=>{const e=[[],[]];a.forEach((a,l)=>{e[l%2].push(a)}),na.value=e})(n)},wa=()=>{ma.value=va.value.reduce((a,e)=>a+e.quantity,0)},qa=()=>{ga.value=!ga.value,console.log("è´­ç‰©è½¦é¢æ¿çŠ¶æ€:",ga.value)},xa=(a,e)=>{const l=a.quantity+e;if(l<=0){const e=va.value.findIndex(e=>e.id===a.id);e>-1&&va.value.splice(e,1)}else a.quantity=l;wa(),console.log("æ›´æ–°å•†å“æ•°é‡:",a.name,"æ–°æ•°é‡:",l)},Sa=()=>{if(0===ma.value)return void console.log("è´­ç‰©è½¦ä¸ºç©ºï¼Œæ— æ³•ä¸‹å•");const a={id:"ORD"+Date.now().toString().slice(-8),createTime:Date.now(),status:"completed",statusText:"å·²å®Œæˆ",items:va.value.map(a=>({id:a.id,name:a.name,price:a.price,quantity:a.quantity})),totalItems:ma.value,totalPrice:`${ma.value}ä¸ªäº²äº²`};console.log("ç”Ÿæˆè®¢å•:",a);const e=localStorage.getItem("femaleOrders");let l=[];e&&(l=JSON.parse(e)),l.unshift(a),localStorage.setItem("femaleOrders",JSON.stringify(l)),console.log("è®¢å•å·²ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨:",a),va.value=[],wa(),ga.value=!1,la.push("/royal-seal"),console.log("ä¸‹å•æˆåŠŸï¼Œå·²è·³è½¬åˆ°å†å²è®¢å•é¡µé¢")};return(a,e)=>{return g(),t("div",k,[n("div",C,[(g(!0),t(o,null,c(ua.value,(a,e)=>(g(),t("div",{class:"particle",key:e,style:p({left:`${a.left}%`,top:`${a.top}%`,animationDelay:`${a.delay}ms`,animationDuration:`${a.duration}ms`})},null,4))),128))]),e[9]||(e[9]=n("div",{class:"custom-navbar"},[n("div",{class:"nav-right"})],-1)),n("div",b,[n("div",w,[n("div",q,[e[2]||(e[2]=n("img",{class:"search-icon",src:"/qingqing/assets/design_icon.Br84S2zd.png",alt:"æœç´¢å›¾æ ‡"},null,-1)),i(n("input",{type:"text",placeholder:"æœç´¢èœå“",class:"search-placeholder","onUpdate:modelValue":e[0]||(e[0]=a=>oa.value=a)},null,512),[[r,oa.value]])])]),n("div",x,[n("div",S,[(g(!0),t(o,null,c(pa.value,a=>(g(),t("div",{key:a.name,class:d(["category-item",{selected:ca.value===a.name}]),onClick:e=>(a=>{ra.value===a?ra.value=null:(ra.value=a,ia.value="all",Ca(a))})(a.name)},[n("span",D,v(a.name),1),n("span",{class:d(["dropdown-arrow",{rotated:ra.value===a.name}])},"â–¼",2)],10,_))),128))]),ra.value?(g(),t("div",I,[n("div",{class:d(["subcategory-item",{selected:"all"===ia.value}]),onClick:e[1]||(e[1]=a=>ka("all"))},[...e[3]||(e[3]=[n("span",{class:"subcategory-text"},"å…¨éƒ¨",-1)])],2),(g(!0),t(o,null,c((l=ra.value,Array.from(ya.value.get(l)||[])),a=>(g(),t("div",{key:a,class:d(["subcategory-item",{selected:ia.value===a}]),onClick:e=>ka(a)},[n("span",M,v(a),1)],10,L))),128))])):u("",!0)]),n("div",O,[(g(!0),t(o,null,c(na.value,(a,l)=>(g(),t("div",{class:"waterfall-column",key:l},[(g(!0),t(o,null,c(a,a=>(g(),t("div",{class:"dish-card",key:a.id},[e[6]||(e[6]=n("div",{class:"card-background"},null,-1)),n("div",$,[n("img",{class:"dish-image",src:a.imageUrl,alt:"dish.name",onError:e=>((a,e)=>{console.error(`å›¾ç‰‡åŠ è½½å¤±è´¥: ${e.imageUrl}`),a.target.src=`https://picsum.photos/200/200?random=${e.id}`,e.imageUrl=a.target.src})(e,a)},null,40,J),n("div",U,[n("span",j,v(a.name),1),n("span",E,v(a.description),1),n("div",N,[n("div",T,[e[4]||(e[4]=n("img",{class:"price-icon",src:h,alt:"é©¬å¡é¾™é»„è‰²"},null,-1)),n("span",z,v(a.price),1)]),n("div",{class:"add-to-cart-btn",onClick:y(e=>(a=>{const e=va.value.find(e=>e.id===a.id);e?e.quantity+=1:va.value.push({...a,quantity:1}),wa(),console.log("æ·»åŠ åˆ°è´­ç‰©è½¦æˆåŠŸ:",a.name,"è´­ç‰©è½¦æ•°é‡:",ma.value)})(a),["stop"])},[...e[5]||(e[5]=[n("img",{class:"add-icon",src:"/qingqing/assets/design_icon_2.kJTLLqaS.png",alt:"æ·»åŠ åˆ°è´­ç‰©è½¦"},null,-1)])],8,A)])])])]))),128))]))),128))])]),n("div",{class:"fab",onClick:qa},[ma.value>0?(g(),t("div",B,v(ma.value),1)):u("",!0)]),n("div",{class:d(["cart-panel",{expanded:ga.value}])},[n("div",{class:"cart-header"},[e[7]||(e[7]=n("h3",null,"æˆ‘çš„è´­ç‰©è½¦",-1)),n("span",{class:"close-btn",onClick:qa},"Ã—")]),0===ma.value?(g(),t("div",F,[...e[8]||(e[8]=[n("span",{class:"empty-icon"},"ğŸ›’",-1),n("p",null,"è´­ç‰©è½¦æ˜¯ç©ºçš„ï¼Œå¿«å»æ·»åŠ ç¾é£Ÿå§ï½",-1)])])):(g(),t("div",P,[(g(!0),t(o,null,c(va.value,a=>(g(),t("div",{key:a.id,class:"cart-item"},[n("div",R,[n("img",{src:a.imageUrl,alt:a.name},null,8,V)]),n("div",G,[n("h4",H,v(a.name),1),n("p",K,v(a.price),1)]),n("div",Q,[n("button",{class:"action-btn decrease",onClick:e=>xa(a,-1)},"-",8,W),n("span",X,v(a.quantity),1),n("button",{class:"action-btn increase",onClick:e=>xa(a,1)},"+",8,Y)])]))),128))])),ma.value>0?(g(),t("div",Z,[n("div",aa,[n("span",null,"å…± "+v(ma.value)+" ä»¶å•†å“",1),n("span",ea,"æ€»è®¡ï¼š"+v(ma.value)+" ä¸ªäº²äº²",1)]),n("button",{class:"checkout-btn",onClick:Sa},"ä¸‹å•")])):u("",!0)],2)]);var l}}},[["__scopeId","data-v-d7e8683d"]]);export{la as default};
